<!DOCTYPE html>
<html>
	<head>
	
		 <link rel="stylesheet" href="index.css">


		 <meta charset="utf-8">
		 
	<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>   	 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular.min.js"></script>
  <script src="https://rawgithub.com/angular-ui/ui-sortable/master/src/sortable.js"></script>
  <script src="https://rawgit.com/thgreasi/ui-sortable-multiselection/master/src/ui.sortable.multiselection.js"></script>
<script>
var encabezados1 =["ddd","eee"];
var filedsToD3 =[];
var encabezados =[];
var datosnew={};
 </script>
 
 
	</head>
	
	<body>
     
	  
	   <h1>PROYECTOS PRESENTADOS CONGRESO REPUBLICA COLOMBIA 2014-2018</h1>
	   <p>
	   Informacion obtendida la organizacion congreso visible.
	   
	   <a href="https://www.congresovisible.org/" target="_blank">
        https://www.congresovisible.org/
    </a>
	<p>
	  En este diagrama de árbol se visualiza los proyectos presentados por los diferentes cámaras del senado, 
cámaras Representantes, como también los presentados por cámaras mixtas

	</p>
	<p>
	Los proyectos se pueden localizar por comision entrante, tipo de iniciativa y estado actual del proyecto.
	</p>
	<hr>
	<p></p>
	
	 <span></span>
	 <output id="fechamarca" class="item1"></output>
	 
	 
	
	 
	<div id="selecion"></div>
	    <svg id="svg" width="2000" height="850" class="grafica"></svg>
		 
	  <script src="senado.js"></script>
	   
	  	  
	
	<!-- CODIGO ANGULAR -->
	
	<script>
	var globalarray=[];
		  
		  console.log("haberr", encabezados);
		  function  recive(arreglo){
		  
		  globalarray = arreglo;
		  console.log("Funcion Recive: encabezados de d3 a Angular. En Angular",arreglo);
		  
		  }
		  </script>
	
	<div ng-app="sortableApp" ng-controller="sortableController" class = "container" >
	
  <div class="floatleft">
  
  
    <div ui-sortable="sortableOptions" ng-model="list" class="list logList">
	
	
      <div ui-sortable-selectable ng-repeat="item in list" class="item">
      {{item.text}}
      </div>
	  <p>
	  <div class="floatcenter">
	 <input type="button" value="Mostrar" ng-click="procesarClic()" class="button">
	 </div>
	  <p>
	
    </div>
	
	  

	  </div>
	  
	  <div  class="floatright logList1">

  <label>Encontrar: <input type="text" id="filterInput"  style="width:500px;height:20px" class="item1"></label>
  <input type="submit" value="Buscar" onClick="buscaProyecto()"  class="button">
  <p>
  <p>
  Id Iniciativa:
  <p>
  <output id="enceuntra" class="item1"></output>
</div>


  <div class="clear"></div>


  
<script>


//var globalarray=["uno", "dos", "tres","uatro"];
var salidadadtos =[];
  
var myapp = angular.module('sortableApp', ['ui.sortable', 'ui.sortable.multiselection']);
  

myapp.controller('sortableController', function ($scope, uiSortableMultiSelectionMethods) {
  var tmpList1 = ["comision_entrante", "iniciativa", "estado_actual", "id_proyecto", "titulo", "fecha_radicacion"];
    var tmpList =[];
  
  
 if(globalarray.length>0){
 tmpList=[];
 }else { 
   globalarray =tmpList1;
   }
 
  for(i=0;i<globalarray.length;i++){
    var elemento = globalarray[i];
    console.log("elemneto", elemento);
    tmpList.push({text: elemento, value:i});
  }
  
 
  $scope.list = tmpList;  
  $scope.sortingLog = [];
  
  $scope.sortableOptions = uiSortableMultiSelectionMethods.extendOptions({
    stop: function(e, ui) {
      // this callback has the changed model
      var logEntry = tmpList.map(function(i){
        return i.value;
      }).join(', ');
      
      $scope.sortingLog.push('Stop: ' + logEntry);
  	  arreglado = $scope.sortingLog;

      
      //Llamar la funcion de javascript y pasarle la lista
     // responseTest($scope.sortingLog);
    }
  });
  
  // bonus: listen for sortable item selections
  angular.element('[ui-sortable]').on('ui-sortable-selectionschanged', function (e, args) {
    console.log("entra");
    var $this = $(this);
    var selectedItemIndexes = $this.find('.ui-sortable-selected')
    .map(function(i, element){
      return $(this).index();
    })
    .toArray();
    console.log("selectedItemIndexes",selectedItemIndexes);
    
    var selectedItems = $.map(selectedItemIndexes, function(i) {
      return $scope.list[i]
    });
	  console.log("lista",  $scope.list);
    list = $scope.list;
	//responseTest(list);
  });
  
  $scope.procesarClic = function(){
  
 // responseTest($scope.list);
  
  dAngular($scope.list);
 // alert("yess");
  }
 // salidadadtos = $scope.list;
});
  


/*JavaScript*/

//Funcion que recibe la llamada de Angular y muestra la lista
/*
function responseTest(list) {
  console.log("Llego******* ", list);
  //filedsToD3 = list;
  dAngular(list);
}
*/


  </script>
  
 
  
</div>

	
	<!-- FIN CODIGO ANGULAR -->
	
	 
	
	
	
	<p><strong>Abstracci&oacute;n WHAT- WHY &ndash; HOW :</strong></p>
<p>&nbsp;</p>
<p>Descripci&oacute;n de acuerdo con FrameWork de Tamara Munzner:</p>
<p><strong>WHAT:</strong></p>
<ul>
<li>Data and Dataset Types:
<ul>
<li>Data Set Taype : Tree: Nodos y Links:
<ul>
<li>Data Set con 1700 &Iacute;tems y 6 Atributos.</li>
<li>Atributos usados en la Visualizaci&oacute;n:
<ul>
<li>Comision_Entrante: Categ&oacute;rico.
<ul>
<li>Corresponde la Comisi&oacute;n que radico el proyecto</li>
<li>En total hay 22 Comisiones entre Senado, C&aacute;mara y Mixtas</li>
</ul>
</li>
<li>Iniciativa: Categ&oacute;rico.
<ul>
<li>Corresponde a la Iniciativa con a que fue presentada el proyecto
<ul>
<li>Legislativa</li>
<li>Gubernamental</li>
<li>Otras entidades</li>
<li>Mixta</li>
<li>Popular&nbsp;</li>
</ul>
</li>
</ul>
</li>
<li>Estado_Actual: Categ&oacute;rico.
<ul>
<li>Corresponde al estado en que se encuentra el proyecto</li>
<li>En total hay 24 estados.</li>
</ul>
</li>
<li>Id_Proyecto: Ordenado-&gt; Cuantitativo -&gt; Secuencial
<ul>
<li>Corresponde al N&uacute;mero asignado al proyecto en radicaci&oacute;n.</li>
</ul>
</li>
<li>Fecha_Radicacion: Ordenado-Ordinal-Secuencia
<ul>
<li>En formato: &nbsp;A&ntilde;o-Mes-Dia, corresponde al d&iacute;a de radicacion.</li>
</ul>
</li>
<li>Titulo: Categ&oacute;rico .
<ul>
<li>Corresponde al tema principal del proyecto.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Nodos: Un nodo Padre (Congreso) y Nodos hijos: Atributos.</li>
<li>Links: Relaciones entre atributos hijos.</li>
</ul>
</li>
</ul>
<p>&nbsp;</p>
<p><strong>WHY:</strong></p>
<ul>
<li>Tarea Principal:
<ul>
<li>&iquest;Determinar los estados de los proyectos radicados por las diferentes comisiones</li>
<li>&iquest;Determinar la cantidad de proyectos por los estados y radicados por las diferentes comisiones</li>
<li>Encontrar la ruta de un proyecto determinado desde su radicaci&oacute;n.</li>
</ul>
</li>
<li>Tarea Secundaria:
<ul>
<li>&iquest;Qu&eacute; comisiones tienen m&aacute;s proyectos en un determinado estado ?</li>
</ul>
</li>
</ul>
<p>&nbsp; &nbsp; &nbsp; &nbsp; De acuerdo con el framework de Tamara, las tareas propuestas por el usuario se logran realizar de mejor manera mediante una visualizaci&oacute;n que permita:</p>
<ul>
<li>&nbsp;Query-&gt;Identificar -&gt; Network Data - &gt;Paths :
<ul>
<li>Identificar las rutas de un proyecto desde su radicaci&oacute;n</li>
<li></li>
</ul>
</li>
<li>Query -&gt; Summarize -&gt; Network Data -&gt; Topology :
<ul>
<li>Ver la topolog&iacute;a total de los proyectos presentados en un pedido dado.</li>
</ul>
</li>
<li>Search -&gt; Explore -&gt; Network Data - &gt;&nbsp;&nbsp;&nbsp; Topology :</li>
<li>
<ul>
<li>Encontrar rutas por los proyectos presentados por las diferentes comisiones</li>
</ul>
</li>
</ul>
<p>&nbsp;</p>
<p><strong>HOW:</strong></p>
<ul>
<li>Las tareas planteadas se logran cumplir mediante los siguientes IDIOMS:</li>
</ul>
<p><strong>&nbsp;</strong><strong>Visualizacion de Tree Data mediante Collapsible Tree layout.</strong></p>
<ul>
<li>Marcas:
<ul>
<li>Puntos que representan nodos. (Atributos)</li>
<li>Connection Marks - Links representa la relaci&oacute;n entre nodos.</li>
<li>L&iacute;neas conectan los nodos entre s&iacute;.</li>
</ul>
</li>
<li>Canales:&nbsp;
<ul>
<li>&nbsp;Nodos:
<ul>
<li>Identity Chanel: Shape Circle.</li>
</ul>
</li>
</ul>
</li>
<li>&nbsp;Encode
<ul>
<li>Separate, order : Disposicion vertical nodos.</li>
</ul>
</li>
<li>&nbsp;Manipulate
<ul>
<li>Select : Selecci&oacute;n de Nodos.</li>
</ul>
</li>
</ul>
<p>&nbsp;<strong>INSIGHTS VISUALIZACION:</strong></p>
<ul>
<li><strong>&nbsp;</strong>Gran cantidad de proyectos son archivados por transito de legislatura, por iniciativa legislativa y por las comisiones de las c&aacute;maras de representantes.</li>
</ul>
<p>&nbsp;</p>
	<p></p>
	  
	  
	</body>
 
</html>

